#include <stddef.h>
#include <stdint.h>
#include <driver/kbdrive.h>
#include "io.h"

static char c = 0;

char getScancode()
{
	while(1)
	{
		if(inb(0x60) != c)
		{
			c=inb(0x60);
			if(c > 0)
			{
	
				return c;
			}
		}
	}
}

char parseset1[] = {'\0','\0','1','2','3','4','5','6','7','8','9','0','-','=','\0','\0',
	   'Q','W','E','R','T','Y','U','I','O','P','[',']','\n','\0','A','S',
	   'D','F','G','H','J','K','L',';','\'','`','\0','\\','Z','X','C','V',
	   'B','N','M',',','.','/','\0','*','\0',' ','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','7','8','9','-','4','5','6','+','1',
	   '2','3','0','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0',
 	   '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'};
char getChar()
{
	return parseset1[getScancode()];
}
